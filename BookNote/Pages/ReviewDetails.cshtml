@page "{reviewId:int}"
@model BookNote.Pages.ReviewDetailsModel
@{
    ViewData["Title"] = Model.ReviewTitle ?? "レビュー詳細";
}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookNote - @ViewData["Title"]</title>
    <link type="text/css" rel="stylesheet" href="~/css/site.css">
    <link type="text/css" rel="stylesheet" href="~/css/review.css">
</head>
<body class="review-detail-page">
    <div class="main-content">
        @if (Model.Review != null && !Model.IsDraft) {
            <div class="reviews-grid">
                <div class="review-card-large" data-isbn="@Model.Isbn">
                    <div class="book-cover-large">
                        <span>NoImage</span>
                    </div>
                    <div class="review-content-large">
                        <div class="review-title">@Model.ReviewTitle</div>
                        <div class="book-title">@Model.BookTitle</div>

                        @if (Model.Evaluation.HasValue) {
                            <div class="rating">
                                評価: @Model.Evaluation / 5
                            </div>
                        }

                        @if (Model.IsSpoilers) {
                            <div class="spoiler-warning">
                                ⚠️ ネタバレ注意
                            </div>
                        }

                        <div class="review-text">
                            @Html.Raw(Model.ReviewHtml)
                        </div>
                        <button class="like-button" data-review-id="@Model.ReviewId" type="button">
                            <span class="heart-icon"></span>
                            <span class="like-count">0</span>
                        </button>
                        <div class="reviewer-info">
                            <div class="reviewer-icon"></div>
                            <a href="/user/UserProfile/@Model.UserPublicId" class="reviewer-name">@Model.UserName</a>
                            <span class="post-time">@Model.PostingTimeDisplay</span>
                        </div>
                    </div>
                </div>
            </div>
        } else {
            <p class="empty-message">レビューが見つかりませんでした。</p>
        }
    </div>

    <script type="text/javascript" src="~/js/site.js"></script>
    <script type="text/javascript" src="~/js/review_details.js"></script>
</body>
</html>